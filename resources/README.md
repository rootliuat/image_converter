# 图片格式转换工具 使用说明

## 功能介绍

这是一个专业的图片格式转换工具，支持将多种图片格式转换为JPEG或PNG格式，并能控制输出文件大小。

### 主要功能
- **多格式支持**: 支持PDF、PNG、BMP、TIFF、WebP等格式转换为JPEG
- **文件大小控制**: 可设置目标文件大小（默认400KB）
- **批量处理**: 支持单个文件或整个文件夹批量处理
- **PDF转换**: 支持将PDF的每一页转换为独立的图片文件
- **智能压缩**: 自动调整图片质量以达到目标文件大小

## 使用方法

### 1. 选择输入文件
- 点击"输入路径"旁的"📂 浏览"按钮
- 选择单个文件或文件夹
- 支持的格式：PDF, JPG, PNG, BMP, TIFF, WebP

### 2. 设置输出路径
- 点击"输出路径"旁的"📂 浏览"按钮
- 选择输出文件夹
- 如果不存在会自动创建

### 3. 调整参数
- **目标大小**: 设置输出文件的目标大小（KB）
- **输出格式**: 选择JPEG或PNG格式
- **处理模式**: 选择单文件或文件夹模式

### 4. 开始转换
- 点击"开始转换"按钮
- 查看进度条和状态信息
- 转换完成后可查看统计结果

## 界面说明

### 主界面布局
```
┌─────────────────────────────────────┐
│  输入路径: [文件路径选择] [📂 浏览]   │
│  输出路径: [输出路径选择] [📂 浏览]   │
├─────────────────────────────────────┤
│  参数设置:                          │
│  目标大小: [400] KB                 │
│  输出格式: [JPEG] [PNG]             │
│  处理模式: [单文件] [文件夹]         │
├─────────────────────────────────────┤
│  [开始转换] [停止] [打开输出文件夹]  │
│  进度: ████████░░░░ 65%             │
│  状态: 正在处理第3个文件...          │
│  统计: ✅成功:5 ❌失败:0 📁总计:8   │
└─────────────────────────────────────┘
```

### 按钮功能
- **开始转换**: 开始批量转换处理
- **停止**: 停止当前转换任务
- **打开输出文件夹**: 在文件管理器中打开输出目录
- **📂 浏览**: 打开文件/文件夹选择对话框

## 高级设置

程序会在用户配置目录创建配置文件，可以手动编辑以下参数：

- `jpeg_quality_range`: JPEG质量范围 (10-95)
- `png_compression_level`: PNG压缩级别 (0-9)
- `pdf_render_dpi`: PDF渲染DPI (72-600)
- `max_concurrent_jobs`: 最大并发任务数 (1-16)

## 支持的文件格式

### 输入格式
| 格式 | 扩展名 | 说明 |
|------|--------|------|
| PDF | .pdf | 支持多页PDF，每页转换为独立图片 |
| JPEG | .jpg, .jpeg | 可以进行重压缩 |
| PNG | .png | 支持透明通道 |
| BMP | .bmp | Windows位图格式 |
| TIFF | .tiff, .tif | 高质量图像格式 |
| WebP | .webp | Google开发的现代格式 |

### 输出格式
- **JPEG**: 有损压缩，文件小，适合照片
- **PNG**: 无损压缩，支持透明，适合图标和截图

## 注意事项

### 文件处理
1. **PDF转换**: 每页会生成一个独立的图片文件
2. **文件命名**: 转换后的文件会自动重命名，避免覆盖
3. **路径长度**: 避免使用过长的文件路径
4. **权限要求**: 确保对输入和输出目录有读写权限

### 性能优化
1. **并发处理**: 程序支持多线程并发处理
2. **内存使用**: 大文件处理时会占用较多内存
3. **磁盘空间**: 确保输出目录有足够空间

### 质量控制
1. **目标大小**: 设置合理的目标大小，过小会影响图片质量
2. **格式选择**: JPEG适合照片，PNG适合图标和截图
3. **压缩算法**: 程序会自动调整压缩参数达到目标大小

## 故障排除

### 常见问题

**Q: 转换失败，提示"无法读取文件"**
A: 检查文件是否被其他程序占用，或者文件是否损坏

**Q: PDF转换后图片模糊**
A: 在高级设置中增加PDF渲染DPI值（如300）

**Q: 处理速度很慢**
A: 可以在配置文件中增加并发任务数量

**Q: 输出文件大小不准确**
A: 压缩算法是近似的，最终大小可能与目标大小有差异

### 错误代码
- `E001`: 输入文件不存在或无法访问
- `E002`: 输出目录无写入权限
- `E003`: 文件格式不支持
- `E004`: 内存不足
- `E005`: 磁盘空间不足

## 技术支持

### 系统要求
- **操作系统**: Windows 10 或更高版本
- **内存**: 建议4GB以上
- **磁盘空间**: 根据处理文件大小而定

### 版本信息
- **当前版本**: v0.1.0
- **构建日期**: 2024年
- **运行环境**: .NET Framework 不需要

### 更新日志
- v0.1.0: 初始版本，支持基本的图片格式转换功能

---

© 2024 图片格式转换工具. 保留所有权利.